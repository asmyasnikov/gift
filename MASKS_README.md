# Инструкция по созданию масок для фото

## Автоматическое определение главных фото

Главные фото определяются **автоматически** по наличию PNG файла с тем же именем.

**Пример:**
- Основное фото: `main1.jpeg`
- Маска: `main1.png` (то же имя, расширение PNG)

Если у фото есть PNG файл с тем же именем - оно автоматически становится главным фото для слайд-шоу.

## Формат файлов масок

### Имя файла
Маска должна иметь **то же имя**, что и основное фото, но с расширением `.png` (без суффикса `_mask`)

**Пример:**
- Основное фото: `main1.jpeg`
- Маска: `main1.png`

### Формат изображения
- **Формат:** PNG (с поддержкой альфа-канала)
- **Разрешение:** Рекомендуется то же разрешение, что и у основного фото (или пропорциональное)
- **Цветовая схема (ИНВЕРТИРОВАННАЯ ЛОГИКА):** 
  - **Прозрачные области** (альфа ≤ 128) = области с **минимальной opacity** (MIN_OPACITY = 0.05)
  - **Непрозрачные области** (альфа > 128) = области с **максимальной opacity** (MAX_OPACITY = 1.0)
  
**Важно:** Логика инвертирована! Прозрачные области в маске = min opacity на фото, непрозрачные = max opacity

### Как создать маску

#### Вариант 1: Photoshop / GIMP
1. Откройте основное фото
2. Создайте новый слой
3. **Закрасьте ПРОЗРАЧНЫМ** (или удалите) области, где должна быть минимальная opacity (лица, важные детали)
4. Остальные области оставьте **непрозрачными** (белыми или любым цветом)
5. Можно использовать мягкие кисти для плавного перехода (полупрозрачные области)
6. Экспортируйте как PNG с альфа-каналом

**Важно:** Прозрачные области = min opacity, непрозрачные = max opacity

#### Вариант 2: Онлайн редакторы
- Используйте любой редактор, поддерживающий альфа-канал PNG
- Создайте маску с белыми областями для важных частей фото

#### Вариант 3: Автоматическая генерация
- Можно использовать инструменты для выделения объектов (например, Remove.bg API для выделения людей)

### Важные моменты

1. **Плавные переходы:** Используйте размытие (blur) или мягкие кисти на краях прозрачных областей для плавного перехода opacity
2. **Размер:** Маска должна быть того же размера или пропорциональна основному фото
3. **Расположение:** Файл маски должен находиться в папке `/photos/` рядом с основным фото
4. **Множественные области:** Можно выделить несколько прозрачных областей - алгоритм обработает их все
5. **Имя файла:** То же имя что и фото, но с расширением `.png` (без `_mask`)

### Пример структуры файлов

```
photos/
  ├── main1.jpeg      (основное фото)
  ├── main1.png       (маска - автоматически делает main1.jpeg главным)
  ├── photo2.jpg      (обычное фото, не главное)
  └── main2.jpeg      (главное фото, если есть main2.png)
```

### Тестирование

После создания маски:
1. Обновите страницу в браузере
2. Проверьте в инспекторе браузера, что тайлы в области маски имеют opacity близкую к MIN_OPACITY
3. Тайлы вне маски должны иметь opacity близкую к MAX_OPACITY

## Роль фильтров brightness и saturate

### brightness (яркость)
- **Текущее значение:** 0.85 (85% от оригинальной яркости)
- **Назначение:** Затемняет тайлы, чтобы основное фото было лучше видно
- **Диапазон:** 0.0 (черный) - 1.0 (оригинал) - >1.0 (ярче)
- **Рекомендации:**
  - 0.7-0.9: Хорошая видимость основного фото
  - 1.0: Тайлы слишком яркие, основное фото плохо видно
  - <0.7: Тайлы слишком темные

### saturate (насыщенность)
- **Текущее значение:** 1.15 (115% от оригинальной насыщенности)
- **Назначение:** Увеличивает насыщенность цветов тайлов для более яркой мозаики
- **Диапазон:** 0.0 (ч/б) - 1.0 (оригинал) - >1.0 (ярче)
- **Рекомендации:**
  - 1.0-1.2: Естественный вид
  - >1.5: Слишком яркие, неестественные цвета
  - <1.0: Более приглушенные цвета

### Где изменить
Константы находятся в начале файла `src/App.jsx`:
```javascript
const IMAGE_BRIGHTNESS = 0.85; // Измените здесь
const IMAGE_SATURATE = 1.15;   // Измените здесь
```

Или в инспекторе браузера можно изменить CSS свойство `filter` у элементов `.mosaic-tile img`

